{"version":3,"names":["_sfc_main","data","form","name","city","startDate","endDate","computed","formValid","daysCount","start","Date","end","Math","ceil","methods","handleCityChange","e","tconst","province","detail","value","municipalities","includes","handleStartDate","handleEndDate","handleConfirm","newTrip","_objectSpread2","id","now","days","Array","fill","map","_","i","day","attractions","trips","common_vendor","index","getStorageSync","push","setStorageSync","navigateTo","url","concat","wx","createPage","MiniProgramPage"],"sources":["name-trip.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdHJhdmVsL25hbWUtdHJpcC52dWU"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <view class=\"form-card\">\n      <!-- 行程名称 -->\n      <view class=\"form-item\">\n        <text class=\"label\">行程名称</text>\n        <input \n          v-model=\"form.name\" \n          placeholder=\"请输入行程名称\"\n          placeholder-class=\"placeholder\"\n        />\n      </view>\n\n      <!-- 城市选择 -->\n      <view class=\"form-item\">\n        <text class=\"label\">目的地</text>\n        <picker \n          mode=\"region\" \n          @change=\"handleCityChange\"\n        >\n          <view class=\"picker\">\n            {{ form.city || '请选择城市' }}\n            <uni-icons type=\"arrowright\" size=\"18\" color=\"#999\" />\n          </view>\n        </picker>\n      </view>\n\n      <!-- 日期选择 -->\n      <view class=\"form-item\">\n        <text class=\"label\">出发日期</text>\n        <picker \n          mode=\"date\" \n          :value=\"form.startDate\" \n          @change=\"handleStartDate\"\n        >\n          <view class=\"picker\">\n            {{ form.startDate || '请选择开始日期' }}\n            <uni-icons type=\"calendar\" size=\"18\" color=\"#999\" />\n          </view>\n        </picker>\n      </view>\n\n      <view class=\"form-item\">\n        <text class=\"label\">结束日期</text>\n        <picker \n          mode=\"date\" \n          :value=\"form.endDate\" \n          :start=\"form.startDate\"\n          @change=\"handleEndDate\"\n        >\n          <view class=\"picker\">\n            {{ form.endDate || '请选择结束日期' }}\n            <uni-icons type=\"calendar\" size=\"18\" color=\"#999\" />\n          </view>\n        </picker>\n      </view>\n    </view>\n\n    <button \n      class=\"confirm-btn\" \n      :class=\"{ disabled: !formValid }\" \n      @click=\"handleConfirm\"\n    >\n      创建详细行程\n    </button>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      form: {\n        name: '',\n        city: '',\n        startDate: '',\n        endDate: ''\n      }\n    };\n  },\n  computed: {\n    formValid() {\n      return (\n        this.form.name &&\n        this.form.city &&\n        this.form.startDate &&\n        this.form.endDate\n      );\n    },\n    daysCount() {\n      if (!this.form.startDate || !this.form.endDate) return 0;\n      const start = new Date(this.form.startDate);\n      const end = new Date(this.form.endDate);\n      return Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;\n    }\n  },\n  methods: {\n    handleCityChange(e) {\n      tconst [province, city] = e.detail.value\r\n          // 处理直辖市逻辑（北京、上海、天津、重庆）\r\n          const municipalities = ['北京市', '上海市', '天津市', '重庆市']\r\n          if (municipalities.includes(province)) {\r\n            this.form.city = province // 直辖市直接显示名称\r\n          } else {\r\n            this.form.city = province + city // 普通省市拼接\r\n          }\n    },\n    handleStartDate(e) {\n      this.form.startDate = e.detail.value;\n      if (new Date(this.form.endDate) < new Date(e.detail.value)) {\n        this.form.endDate = '';\n      }\n    },\n    handleEndDate(e) {\n      this.form.endDate = e.detail.value;\n    },\n    handleConfirm() {\n      if (!this.formValid) return;\n\n      const newTrip = {\n        id: Date.now(),\n        ...this.form,\n        days: Array(this.daysCount).fill().map((_, i) => ({\n          day: i + 1,\n          attractions: []\n        }))\n      };\n      // 保存到本地\n      const trips = uni.getStorageSync('trips') || [];\n      trips.push(newTrip);\n      uni.setStorageSync('trips', trips);\n\n      // 跳转到详情页\n      uni.navigateTo({\n        url: `/pages/travel/detail-trip?id=${newTrip.id}`\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.container {\n  padding: 40rpx;\n  min-height: 100vh;\n  background: #ffffff;\n}\n\n.form-card {\n  background: white;\n  border-radius: 24rpx;\n  padding: 0 30rpx;\n}\n\n.form-item {\n  padding: 30rpx 0;\n  border-bottom: 1rpx solid #ffffff;\n\n  .label {\n    font-size: 28rpx;\n    color: #666;\n    margin-bottom: 15rpx;\n    display: block;\n  }\n\n  input, .picker {\n    font-size: 34rpx;\n    height: 80rpx;\n    color: #333;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  .placeholder {\n    color: #ccc;\n  }\n}\n\n.confirm-btn {\n  margin-top: 60rpx;\n  width: 100%;\n  height: 90rpx;\n  line-height: 90rpx;\n  background: #1e6eba;\n  color: white;\n  border-radius: 45rpx;\n  font-size: 34rpx;\n\n  &.disabled {\n    background: #ccc;\n    opacity: 0.6;\n  }\n}\n</style>","import MiniProgramPage from 'E:/Lotus/Lotusq/Lotus/pages/travel/name-trip.vue'\nwx.createPage(MiniProgramPage)"],"mappings":";;;;;;AAqEA,IAAKA,SAAA,GAAU;EACbC,IAAA,WAAAA,KAAA,EAAO;IACL,OAAO;MACLC,IAAA,EAAM;QACJC,IAAA,EAAM;QACNC,IAAA,EAAM;QACNC,SAAA,EAAW;QACXC,OAAA,EAAS;MACX;IAAA;EAEH;EACDC,QAAA,EAAU;IACRC,SAAA,WAAAA,UAAA,EAAY;MACV,OACE,KAAKN,IAAA,CAAKC,IAAA,IACV,KAAKD,IAAA,CAAKE,IAAA,IACV,KAAKF,IAAA,CAAKG,SAAA,IACV,KAAKH,IAAA,CAAKI,OAAA;IAEb;IACDG,SAAA,WAAAA,UAAA,EAAY;MACV,IAAI,CAAC,KAAKP,IAAA,CAAKG,SAAA,IAAa,CAAC,KAAKH,IAAA,CAAKI,OAAA,EAAS,OAAO;MACvD,IAAMI,KAAA,GAAQ,IAAIC,IAAA,CAAK,KAAKT,IAAA,CAAKG,SAAS;MAC1C,IAAMO,GAAA,GAAM,IAAID,IAAA,CAAK,KAAKT,IAAA,CAAKI,OAAO;MACtC,OAAOO,IAAA,CAAKC,IAAA,EAAMF,GAAA,GAAMF,KAAA,KAAU,MAAO,KAAK,KAAK,GAAG,IAAI;IAC5D;EACD;EACDK,OAAA,EAAS;IACPC,gBAAA,WAAAA,iBAAiBC,CAAA,EAAG;MAClBC,MAAA,EAAQC,QAAA,EAAUf,IAAI,KAAIa,CAAA,CAAEG,MAAA,CAAOC,KAAA;MAE/B,IAAMC,cAAA,GAAiB,CAAC,OAAO,OAAO,OAAO,KAAK;MAClD,IAAIA,cAAA,CAAeC,QAAA,CAASJ,QAAQ,GAAG;QACrC,KAAKjB,IAAA,CAAKE,IAAA,GAAOe,QAAA;MAAA,OACZ;QACL,KAAKjB,IAAA,CAAKE,IAAA,GAAOe,QAAA,GAAWf,IAAA;MAC9B;IACL;IACDoB,eAAA,WAAAA,gBAAgBP,CAAA,EAAG;MACjB,KAAKf,IAAA,CAAKG,SAAA,GAAYY,CAAA,CAAEG,MAAA,CAAOC,KAAA;MAC/B,IAAI,IAAIV,IAAA,CAAK,KAAKT,IAAA,CAAKI,OAAO,IAAI,IAAIK,IAAA,CAAKM,CAAA,CAAEG,MAAA,CAAOC,KAAK,GAAG;QAC1D,KAAKnB,IAAA,CAAKI,OAAA,GAAU;MACtB;IACD;IACDmB,aAAA,WAAAA,cAAcR,CAAA,EAAG;MACf,KAAKf,IAAA,CAAKI,OAAA,GAAUW,CAAA,CAAEG,MAAA,CAAOC,KAAA;IAC9B;IACDK,aAAA,WAAAA,cAAA,EAAgB;MACd,IAAI,CAAC,KAAKlB,SAAA,EAAW;MAErB,IAAMmB,OAAA,GAAAC,cAAA,CAAAA,cAAA;QACJC,EAAA,EAAIlB,IAAA,CAAKmB,GAAA;MAAK,GACX,KAAK5B,IAAA;QACR6B,IAAA,EAAMC,KAAA,CAAM,KAAKvB,SAAS,EAAEwB,IAAA,EAAI,CAAGC,GAAA,CAAI,UAACC,CAAA,EAAGC,CAAA;UAAA,OAAO;YAChDC,GAAA,EAAKD,CAAA,GAAI;YACTE,WAAA,EAAa;UACf;QAAA,CAAE;MAAA;MAGJ,IAAMC,KAAA,GAAQC,aAAA,CAAGC,KAAA,CAACC,cAAA,CAAe,OAAO,KAAK;MAC7CH,KAAA,CAAMI,IAAA,CAAKhB,OAAO;MAClBa,aAAA,CAAAC,KAAA,CAAIG,cAAA,CAAe,SAASL,KAAK;MAGjCC,aAAA,CAAAC,KAAA,CAAII,UAAA,CAAW;QACbC,GAAA,kCAAAC,MAAA,CAAqCpB,OAAA,CAAQE,EAAE;MACjD,CAAC;IACH;EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzIAmB,EAAA,CAAGC,UAAA,CAAWC,eAAe","ignoreList":[]}